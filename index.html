<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Twitch Stream Grid Viewer</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="container">
        <header class="header">
            <div class="header-title-row">
                <h1>Twitch Stream Grid Viewer</h1>
                <span id="headerWorkspaceTitle" class="header-workspace-title"></span>
            </div>
            <div class="controls">
                <div class="add-stream-controls">
                    <button id="addStream" class="btn btn-add">Add Stream</button>
                    <button id="bulkImport" class="btn btn-bulk">Bulk Import</button>
                    <button id="addFolder" class="btn btn-folder">Add Folder</button>
                </div>
                <div class="header-search">
                    <input type="text" id="streamSearch" class="header-search-input" placeholder="Filter streamers..." title="Filter by name">
                </div>
                <div class="view-toggle">
                    <button id="viewGallery" class="btn btn-view btn-view-active" title="Gallery view">Gallery</button>
                    <button id="viewList" class="btn btn-view" title="List view">List</button>
                </div>
                <button id="settingsBtn" class="btn btn-settings">Settings</button>
            </div>
        </header>
        
        <div class="sidebar" id="sidebar">
            <div class="sidebar-section workspace-section">
                <h3>Workspace</h3>
                <div class="workspace-controls">
                    <select id="workspaceSelect" class="workspace-select" title="Active workspace">
                        <option value="">— Select —</option>
                    </select>
                    <button id="addWorkspace" class="btn btn-small btn-workspace" title="Add workspace">+</button>
                </div>
            </div>
            <div class="sidebar-section">
                <h3>Hidden Streams</h3>
                <div id="hiddenStreamsList" class="hidden-streams-list">
                    <p class="no-hidden">No hidden streams</p>
                </div>
            </div>
        </div>
        
        <main class="main-content">
            <div id="streamsContainer" class="streams-container">
                <div id="streamsGrid" class="streams-grid">
                    <!-- Gallery: streams with iframes -->
                </div>
                <div id="streamsList" class="streams-list" style="display: none;">
                    <!-- List: stream names only, no iframes -->
                </div>
            </div>
        </main>
    </div>
    
    <!-- Folder Selection Popup -->
    <div id="folderPopup" class="popup-overlay" style="display: none;">
        <div class="popup-content">
            <div class="popup-header">
                <h3>Select Folder</h3>
                <button id="closeFolderPopup" class="popup-close">&times;</button>
            </div>
            <div class="popup-body">
                <select id="folderSelect" class="folder-select">
                    <option value="">Choose a folder...</option>
                </select>
                <div class="popup-buttons">
                    <button id="assignToFolder" class="btn btn-primary">Assign</button>
                    <button id="removeFromFolder" class="btn btn-secondary">Remove from Folder</button>
                    <button id="cancelFolderSelection" class="btn btn-cancel">Cancel</button>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Remove Confirmation Popup -->
    <div id="removePopup" class="popup-overlay" style="display: none;">
        <div class="popup-content">
            <div class="popup-header">
                <h3>Remove Stream</h3>
                <button id="closeRemovePopup" class="popup-close">&times;</button>
            </div>
            <div class="popup-body">
                <p id="removeMessage">Are you sure you want to remove this stream?</p>
                <div class="popup-buttons">
                    <button id="confirmRemove" class="btn btn-danger">Yes, Remove</button>
                    <button id="cancelRemove" class="btn btn-cancel">Cancel</button>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Delete Folder Confirmation Popup -->
    <div id="deleteFolderPopup" class="popup-overlay" style="display: none;">
        <div class="popup-content">
            <div class="popup-header">
                <h3>Delete Folder</h3>
                <button id="closeDeleteFolderPopup" class="popup-close">&times;</button>
            </div>
            <div class="popup-body">
                <p id="deleteFolderMessage">Are you sure you want to delete this folder? All streamers in this folder will be moved to "No Folder".</p>
                <div class="popup-buttons">
                    <button id="confirmDeleteFolder" class="btn btn-danger">Yes, Delete</button>
                    <button id="cancelDeleteFolder" class="btn btn-cancel">Cancel</button>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Delete Workspace Confirmation Popup (above other popups) -->
    <div id="deleteWorkspacePopup" class="popup-overlay popup-overlay-on-top" style="display: none;">
        <div class="popup-content">
            <div class="popup-header">
                <h3>Delete Workspace</h3>
                <button id="closeDeleteWorkspacePopup" class="popup-close">&times;</button>
            </div>
            <div class="popup-body">
                <p id="deleteWorkspaceMessage">Are you sure you want to delete this workspace?</p>
                <label class="delete-workspace-option">
                    <input type="checkbox" id="deleteWorkspaceAlsoStreamers" class="delete-workspace-checkbox">
                    <span>Also delete all streamers in this workspace</span>
                </label>
                <div class="popup-buttons">
                    <button id="confirmDeleteWorkspace" class="btn btn-danger">Yes, Delete</button>
                    <button id="cancelDeleteWorkspace" class="btn btn-cancel">Cancel</button>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Workspace Management Popup -->
    <div id="workspaceManagementPopup" class="popup-overlay" style="display: none;">
        <div class="popup-content popup-content-wide">
            <div class="popup-header">
                <h3>Manage Workspaces</h3>
                <button id="closeWorkspaceManagementPopup" class="popup-close">&times;</button>
            </div>
            <div class="popup-body">
                <p class="popup-section-label">Create new workspace</p>
                <div class="workspace-management-create">
                    <input type="text" id="workspaceManagementNewName" class="popup-input workspace-management-input" placeholder="Workspace name...">
                    <button id="workspaceManagementCreate" class="btn btn-primary">Create</button>
                </div>
                <p class="popup-section-label" style="margin-top: 1.25rem;">Existing workspaces</p>
                <div id="workspaceManagementList" class="workspace-management-list">
                    <!-- Filled by script -->
                </div>
                <div class="popup-buttons" style="margin-top: 1rem;">
                    <button id="closeWorkspaceManagementBtn" class="btn btn-cancel">Close</button>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Workspace Name Popup (Add / Rename) -->
    <div id="workspaceNamePopup" class="popup-overlay" style="display: none;">
        <div class="popup-content">
            <div class="popup-header">
                <h3 id="workspaceNamePopupTitle">Workspace</h3>
                <button id="closeWorkspaceNamePopup" class="popup-close">&times;</button>
            </div>
            <div class="popup-body">
                <label for="workspaceNameInput" class="popup-label">Name:</label>
                <input type="text" id="workspaceNameInput" class="popup-input" placeholder="Workspace name...">
                <div class="popup-buttons">
                    <button id="confirmWorkspaceName" class="btn btn-primary">OK</button>
                    <button id="cancelWorkspaceName" class="btn btn-cancel">Cancel</button>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Add Folder Popup -->
    <div id="addFolderPopup" class="popup-overlay" style="display: none;">
        <div class="popup-content">
            <div class="popup-header">
                <h3>Add New Folder</h3>
                <button id="closeAddFolderPopup" class="popup-close">&times;</button>
            </div>
            <div class="popup-body">
                <label for="folderNameInput" class="popup-label">Folder Name:</label>
                <input type="text" id="folderNameInput" class="popup-input" placeholder="Enter folder name...">
                <div class="popup-buttons">
                    <button id="createFolder" class="btn btn-primary">Create Folder</button>
                    <button id="cancelAddFolder" class="btn btn-cancel">Cancel</button>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Rename Folder Popup -->
    <div id="renameFolderPopup" class="popup-overlay" style="display: none;">
        <div class="popup-content">
            <div class="popup-header">
                <h3>Rename / Move Folder</h3>
                <button id="closeRenameFolderPopup" class="popup-close">&times;</button>
            </div>
            <div class="popup-body">
                <label for="renameFolderNameInput" class="popup-label">Folder name:</label>
                <input type="text" id="renameFolderNameInput" class="popup-input" placeholder="Enter folder name...">
                <label for="renameFolderWorkspaceSelect" class="popup-label" style="margin-top: 0.75rem;">Workspace:</label>
                <select id="renameFolderWorkspaceSelect" class="folder-select">
                    <option value="">— Select —</option>
                </select>
                <div class="popup-buttons" style="margin-top: 1rem;">
                    <button id="confirmRenameFolder" class="btn btn-primary">Save</button>
                    <button id="cancelRenameFolder" class="btn btn-cancel">Cancel</button>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Add Stream Popup -->
    <div id="addStreamPopup" class="popup-overlay" style="display: none;">
        <div class="popup-content">
            <div class="popup-header">
                <h3>Add Streamer</h3>
                <button id="closeAddStreamPopup" class="popup-close">&times;</button>
            </div>
            <div class="popup-body">
                <label for="addStreamNameInput" class="popup-label">Streamer name:</label>
                <input type="text" id="addStreamNameInput" class="popup-input" placeholder="Enter streamer name...">
                <div class="bulk-import-folder-row">
                    <label for="addStreamFolderSelect" class="popup-label">Assign to folder (optional):</label>
                    <div class="bulk-import-folder-controls">
                        <select id="addStreamFolderSelect" class="folder-select bulk-import-select">
                            <option value="">— No folder —</option>
                        </select>
                        <button type="button" id="addStreamNewFolderBtn" class="btn btn-small btn-secondary">Create new folder</button>
                    </div>
                    <div id="addStreamNewFolderInline" class="bulk-import-new-folder-inline" style="display: none;">
                        <input type="text" id="addStreamNewFolderName" class="popup-input bulk-import-inline-input" placeholder="Folder name...">
                        <button type="button" id="addStreamCreateFolderBtn" class="btn btn-small btn-primary">Create</button>
                    </div>
                </div>
                <div class="popup-buttons">
                    <button id="confirmAddStream" class="btn btn-primary">Add Streamer</button>
                    <button id="cancelAddStream" class="btn btn-cancel">Cancel</button>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Bulk Import Popup -->
    <div id="bulkImportPopup" class="popup-overlay" style="display: none;">
        <div class="popup-content popup-content-wide">
            <div class="popup-header">
                <h3>Bulk Import Streamers</h3>
                <button id="closeBulkImportPopup" class="popup-close">&times;</button>
            </div>
            <div class="popup-body">
                <label for="bulkImportInput" class="popup-label">Enter streamer names (one per line or comma-separated):</label>
                <textarea id="bulkImportInput" class="popup-textarea" placeholder="streamer1&#10;streamer2&#10;streamer3"></textarea>
                <div class="bulk-import-folder-row">
                    <label for="bulkImportFolderSelect" class="popup-label">Assign to folder (optional):</label>
                    <div class="bulk-import-folder-controls">
                        <select id="bulkImportFolderSelect" class="folder-select bulk-import-select">
                            <option value="">— No folder —</option>
                        </select>
                        <button type="button" id="bulkImportNewFolderBtn" class="btn btn-small btn-secondary">Create new folder</button>
                    </div>
                    <div id="bulkImportNewFolderInline" class="bulk-import-new-folder-inline" style="display: none;">
                        <input type="text" id="bulkImportNewFolderName" class="popup-input bulk-import-inline-input" placeholder="Folder name...">
                        <button type="button" id="bulkImportCreateFolderBtn" class="btn btn-small btn-primary">Create</button>
                    </div>
                </div>
                <p class="bulk-import-hint">Invalid names and duplicates will be skipped.</p>
                <div class="popup-buttons">
                    <button id="confirmBulkImport" class="btn btn-primary">Add Streamers</button>
                    <button id="cancelBulkImport" class="btn btn-cancel">Cancel</button>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Settings Popup -->
    <div id="settingsPopup" class="popup-overlay" style="display: none;">
        <div class="popup-content">
            <div class="popup-header">
                <h3>Settings</h3>
                <button id="closeSettingsPopup" class="popup-close">&times;</button>
            </div>
            <div class="popup-body">
                <p class="popup-section-label">Data</p>
                <div class="settings-buttons">
                    <button id="saveStreams" class="btn btn-save">Save</button>
                    <button id="loadStreams" class="btn btn-load">Load</button>
                    <button id="clearStreams" class="btn btn-clear">Clear</button>
                </div>
                <input type="file" id="fileInput" accept=".json" style="display: none;">
            </div>
        </div>
    </div>
    
    <!-- Clear Confirmation Popup -->
    <div id="clearPopup" class="popup-overlay" style="display: none;">
        <div class="popup-content">
            <div class="popup-header">
                <h3>Clear All Streams</h3>
                <button id="closeClearPopup" class="popup-close">&times;</button>
            </div>
            <div class="popup-body">
                <p id="clearMessage">Are you sure you want to clear all streams? This action cannot be undone.</p>
                <div class="popup-buttons">
                    <button id="confirmClear" class="btn btn-danger">Yes, Clear All</button>
                    <button id="cancelClear" class="btn btn-cancel">Cancel</button>
                </div>
            </div>
        </div>
    </div>
    
    <script src="script.js"></script>
</body>
</html>
